<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Recycling Sorter Game</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(#1a1a2e, #16213e);
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    #hud {
      text-align: center;
      font-size: 20px;
      padding: 10px;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #0f3460;
      border: 2px solid #fff;
    }
  </style>
</head>
<body>
  <div id="hud">
    Score: <span id="score">0</span> | 
    Lives: <span id="lives">3</span>
  </div>
  <canvas id="gameCanvas" width="950" height="600"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let score = 0;
    let lives = 3;

    const bins = [
      {name: "Paper", type: "paper", color: "blue"},
      {name: "Plastic", type: "plastic", color: "red"},
      {name: "Metal", type: "metal", color: "gray"},
      {name: "Organic", type: "organic", color: "green"},
      {name: "E-Waste", type: "ewaste", color: "purple"},
    ];

    const items = [
      {name: "Newspaper", type: "paper"},
      {name: "Bottle", type: "plastic"},
      {name: "Can", type: "metal"},
      {name: "Apple", type: "organic"},
      {name: "Phone", type: "ewaste"},
    ];

    let currentItem = null;

    function spawnItem() {
      currentItem = {
        ...items[Math.floor(Math.random() * items.length)],
        x: canvas.width / 2 - 50,
        y: 50,
        w: 100,
        h: 40
      };
    }

    function drawItem() {
      ctx.fillStyle = "orange";
      ctx.fillRect(currentItem.x, currentItem.y, currentItem.w, currentItem.h);
      ctx.fillStyle = "black";
      ctx.font = "18px Arial";
      ctx.fillText(currentItem.name, currentItem.x + 10, currentItem.y + 25);
    }

    function drawBins() {
      const binWidth = 140;
      const binHeight = 120;
      const spacing = (canvas.width - bins.length * binWidth) / (bins.length + 1);
      bins.forEach((bin, i) => {
        bin.x = spacing + i * (binWidth + spacing);
        bin.y = canvas.height - binHeight - 10;
        bin.w = binWidth;
        bin.h = binHeight;

        ctx.fillStyle = bin.color;
        ctx.fillRect(bin.x, bin.y, bin.w, bin.h);
        ctx.fillStyle = "white";
        ctx.font = "18px Arial";
        ctx.textAlign = "center";
        ctx.fillText(bin.name, bin.x + bin.w / 2, bin.y + bin.h / 2);
      });
      ctx.textAlign = "left";
    }

    function updateHUD() {
      document.getElementById("score").innerText = score;
      document.getElementById("lives").innerText = lives;
    }

    function dropItem() {
      let placed = false;
      bins.forEach(bin => {
        if (
          currentItem.x + currentItem.w / 2 > bin.x &&
          currentItem.x + currentItem.w / 2 < bin.x + bin.w
        ) {
          placed = true;
          if (currentItem.type === bin.type) {
            score += 10;
          } else {
            lives--;
          }
        }
      });

      if (!placed) {
        lives--;
      }

      updateHUD();

      if (lives <= 0) {
        gameOver();
      } else {
        spawnItem();
      }
    }

    function gameOver() {
      ctx.fillStyle = "rgba(0,0,0,0.7)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "red";
      ctx.font = "48px Arial";
      ctx.fillText("Game Over ", canvas.width / 2 - 150, canvas.height / 2);
      ctx.font = "28px Arial";
      ctx.fillStyle = "white";
      ctx.fillText("Press R to Restart", canvas.width / 2 - 120, canvas.height / 2 + 50);
      currentItem = null;
    }

    function restart() {
      score = 0;
      lives = 3;
      updateHUD();
      spawnItem();
      gameLoop();
    }

    // Controls
    document.addEventListener("keydown", e => {
      if (!currentItem) return;

      if (e.key === "ArrowLeft" || e.key.toLowerCase() === "a") {
        currentItem.x -= 30;
      } else if (e.key === "ArrowRight" || e.key.toLowerCase() === "d") {
        currentItem.x += 30;
      } else if (e.key === " " || e.key === "ArrowDown") {
        dropItem();
      } else if (e.key.toLowerCase() === "r" && lives <= 0) {
        restart();
      }
    });

    function gameLoop() {
      if (!currentItem) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawItem();
      drawBins();
      requestAnimationFrame(gameLoop);
    }

    // Start the game
    spawnItem();
    updateHUD();
    gameLoop();
  </script>
</body>
</html>
